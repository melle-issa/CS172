<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	 xmlns:friends="wordpress-plugin-friends:feed-additions:1" 
	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	>

<channel>
	<title>WordPress &#8211; Something Odd!</title>
	<atom:link href="https://odd.blog/category/wordpress/feed/" rel="self" type="application/rss+xml" />
	<link>https://odd.blog</link>
	<description></description>
	<lastBuildDate>Mon, 27 Feb 2023 19:47:25 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=6.2</generator>

<image>
	<url>https://i0.wp.com/odd.blog/files/2019/11/cropped-2017-12-02-IMG_4918-m.jpg?fit=32%2C32&#038;ssl=1</url>
	<title>WordPress &#8211; Something Odd!</title>
	<link>https://odd.blog</link>
	<width>32</width>
	<height>32</height>
</image> 
<site xmlns="com-wordpress:feed-additions:1">70615218</site>	<item>
		<title>Redirecting ?replytocom so bots go home</title>
		<link>https://odd.blog/2023/02/27/redirecting-replytocom-so-bots-go-home/</link>
					<comments>https://odd.blog/2023/02/27/redirecting-replytocom-so-bots-go-home/#respond</comments>
		
		<dc:creator><![CDATA[Donncha]]></dc:creator>
		<pubDate>Mon, 27 Feb 2023 18:18:00 +0000</pubDate>
				<category><![CDATA[WordPress]]></category>
		<category><![CDATA[mod_rewrite]]></category>
		<category><![CDATA[robots.txt]]></category>
		<guid isPermaLink="false">https://odd.blog/?p=89589554</guid>

					<description><![CDATA[Earlier this month I noticed that a particular bot that likes to visit my website, &#8220;MJ12bot/v1.4.8&#8221; seems to be particularly attracted to the &#8220;reply to comment&#8221; links generated by my blog. Those are links that bots see, but we see the &#8220;Reply&#8221; button that uses JavaScript to reply to a [&#8230;]]]></description>
										<content:encoded><![CDATA[
<p>Earlier this month I noticed that a particular bot that likes to visit my website, &#8220;MJ12bot/v1.4.8&#8221; seems to be particularly attracted to the &#8220;reply to comment&#8221; links generated by my blog. Those are links that bots see, but we see the &#8220;Reply&#8221; button that uses JavaScript to reply to a comment.</p>



<p>To be honest, it&#8217;s pretty annoying to see a bot constantly fetching those URLs from my website. Earlier this month, it was on a roll and grabbing several dozen at a time. While my server can handle the traffic without any issues, who wants a bot trampling over their server?</p>



<p>I decided to stop them in two ways:</p>



<ul>
<li>Redirect them back to the post in a mod_rewrite rule.</li>



<li>Block them in robots.txt and hopefully the bots will go away.</li>
</ul>



<p>Coming up with a mod_rewrite rule <a href="https://mastodon.ie/@donncha/109834002975042301">was surprisingly hard</a>, but after mentioning this on Mastodon I received a reply from <a href="https://toot.re/@JosKleverWebSupport">Jos Klever</a> who figured out I needed the QSD flag. So, to spare you the hassle of researching it, here are the mod_rewrite rules that worked for me. It causes a 301 permanent redirect to the anchor tag of the comment. Add this to your .htaccess file.</p>



<pre class="wp-block-code"><code>RewriteCond %{QUERY_STRING} replytocom=(.*)$
RewriteRule ^(.*)/          $1/#comment-%1 &#91;NE,QSD,L,R=301]</code></pre>



<p>Blocking requests like this in the robots.txt is much simpler. WordPress can generate the robots.txt file for you using the <a href="https://developer.wordpress.org/reference/hooks/robots_txt/">robots_txt filter</a>. Add the following to a mu-plugin PHP script.</p>



<pre class="wp-block-code"><code>function disallow_replycom_urls( $output, $public ) {
    $output .= 'Disallow: ?replytocom';
    return $output;
}
add_filter( 'robots_txt', 'disallow_replycom_urls', 10, 2 );</code></pre>



<p>I haven&#8217;t received many comments on my posts lately. However, I stumbled upon some interesting posts by clicking the RANDOM link above, which I decided to examine as part of my research. During my search, I delved deep into the blogosphere of the past, almost like being an archaeologist, because some links were no longer available, and I had to search for them on archive.org. I was also pleasantly surprised to find that a link to a GIF from 2005 was still alive!</p>
]]></content:encoded>
					
					<wfw:commentRss>https://odd.blog/2023/02/27/redirecting-replytocom-so-bots-go-home/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
<post-id xmlns="com-wordpress:feed-additions:1">89589554</post-id>	</item>
		<item>
		<title>The Mastodon Onslaught on your blog</title>
		<link>https://odd.blog/2023/01/02/the-mastodon-onslaught-on-your-blog/</link>
					<comments>https://odd.blog/2023/01/02/the-mastodon-onslaught-on-your-blog/#comments</comments>
		
		<dc:creator><![CDATA[Donncha]]></dc:creator>
		<pubDate>Mon, 02 Jan 2023 09:31:43 +0000</pubDate>
				<category><![CDATA[WordPress]]></category>
		<category><![CDATA[apache]]></category>
		<category><![CDATA[Fediverse]]></category>
		<category><![CDATA[JWZ]]></category>
		<category><![CDATA[Mastodon]]></category>
		<category><![CDATA[WP Super Cache]]></category>
		<guid isPermaLink="false">https://odd.blog/?p=89589420</guid>

					<description><![CDATA[You might not be on Mastodon yet, but your blog could get a torrent of traffic from Mastodon, or other Fediverse network if it&#8217;s shared there. If your website is mentioned there, it might be the “victim” of an inadvertent denial of service attack, as hundreds or thousands of servers [&#8230;]]]></description>
										<content:encoded><![CDATA[
<p>You might not be on Mastodon yet, but your blog could get a torrent of traffic from Mastodon, or other Fediverse network if it&#8217;s shared there.</p>



<p>If your website is mentioned there, it might be the “victim” of an inadvertent denial of service attack, as hundreds or thousands of servers request the URL in the 60 seconds or so afterwards. That is precisely what <a href="https://www.jwz.org/blog/2022/11/mastodon-stampede/">JWZ blogged about</a> last month when his site was taken down by Mastodon servers.</p>



<blockquote class="wp-block-quote">
<p>Every time I do a new blog post, within a second I have over a thousand simultaneous hits of that URL on my web server from unique IPs. Load goes over 100, and mariadb stops responding.</p>
<cite>JWZ on <a href="https://www.jwz.org/blog/2022/11/mastodon-stampede/">Mastodon Stampede</a>.</cite></blockquote>



<p></p>



<p>JWZ has over <a href="https://mastodon.social/@jwz">8,000 followers.</a> Every time he shares a post on Mastodon, the instances (servers) where those followers live will send a request to his blog to generate a preview. Actually, two requests will be sent:</p>



<ul>
<li>A request for the wp-json embed for the page.</li>



<li>A request for the page that was shared.</li>
</ul>



<p>Eventually, he blocked the Mastodon user agent. That stops previews of his website showing up on Mastodon posts, but resolves the problem for his website.</p>



<p>Yesterday morning, I <a href="https://mastodon.ie/@donncha/109614145566437712">decided to see what effect</a> sharing a link on my Mastodon account would have on my server. My Mastodon account has 1.8K followers. A far cry from the number of followers JWZ has, but still enough to test my server.</p>



<p>I wanted to test several scenarios:</p>



<ul>
<li>Caching the post before sharing.</li>



<li>Changing Apache configuration.</li>



<li>Sharing without caching on my server.</li>
</ul>



<p>My server is at Linode. I pay an average of $24/month to run this site and my photoblog is on it too where I share a daily photo + link on Mastodon. It&#8217;s not a heavy-duty server that can withstand a huge amount of traffic.</p>



<p>If you&#8217;d like to skip the details, my server coped fine with sharing a URL from here to Mastodon. The load average went up for about 20 seconds, topping out at the max for about 5 seconds before things calmed down. It was responsive the whole time. Install a full-page caching plugin like <a href="https://wordpress.org/plugins/wp-super-cache/">WP Super Cache</a>, <a href="https://jetpack.com/boost/">Jetpack Boost</a> and <a href="https://wordpress.org/plugins/wp-rest-cache/">WP Rest Cache</a> and your site will probably be fine. Jetpack Boost and the <a href="https://jetpack.com/">Jetpack</a> Image Accelerator will help when human visitors arrive.</p>


<div class="wp-block-image is-style-default">
<figure class="aligncenter size-large"><a href="https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-10.03.17.png?ssl=1"><img data-attachment-id="89589427" data-permalink="https://odd.blog/2023/01/02/the-mastodon-onslaught-on-your-blog/screenshot-2023-01-02-at-10-03-17/" data-orig-file="https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-10.03.17.png?fit=2006%2C776&amp;ssl=1" data-orig-size="2006,776" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Screenshot-2023-01-02-at-10.03.17" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-10.03.17.png?fit=300%2C116&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-10.03.17.png?fit=790%2C306&amp;ssl=1" decoding="async" width="790" height="306" src="https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-10.03.17.png?resize=790%2C306&#038;ssl=1" alt="" class="wp-image-89589427" srcset="https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-10.03.17.png?resize=1024%2C396&amp;ssl=1 1024w, https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-10.03.17.png?resize=300%2C116&amp;ssl=1 300w, https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-10.03.17.png?resize=768%2C297&amp;ssl=1 768w, https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-10.03.17.png?resize=1536%2C594&amp;ssl=1 1536w, https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-10.03.17.png?w=2006&amp;ssl=1 2006w" sizes="(max-width: 790px) 100vw, 790px" data-recalc-dims="1" /></a></figure></div>


<p>The <a href="https://mastodon.ie/@donncha/109614168671378154">first test</a> resulted in:</p>



<ul>
<li>261 requests for the page embed.</li>



<li>359 requests for the page itself.</li>



<li>1 minute load average topped out at 1.34 for 5 seconds.</li>
</ul>



<p>The page was cached by WP Super Cache, but I had set the garbage collection TTL to 60 seconds and I believe it expired halfway through the test, so it had to generate the cache again. Once I adjusted that, and set the TTL to 600 seconds, <a href="https://mastodon.ie/@donncha/109614227575646081">the second test</a> performed better. The page remained cached throughout:</p>



<ul>
<li>273 requests for the page embed.</li>



<li>289 requests for the page itself.</li>



<li>1 minute load average topped out at 0.71 for 5 seconds.</li>
</ul>



<p>The main points of my Apache configuration:</p>



<ul>
<li>Keep alives are disabled.</li>



<li>5 start servers</li>



<li>Minimum 10 spare servers</li>
</ul>



<p>When I reduced the start and minimum spare servers to 1, <a href="https://mastodon.ie/@donncha/109614274892094213">the next test</a> took longer to complete, and the load average rose to 1.24, even on a fully cached page. This was expected as the server didn&#8217;t have the spare capacity to deal with the sudden traffic.</p>



<p>After reverting the changes to Apache, I disabled caching on my blog and shared another URL. The <a href="https://mastodon.ie/@donncha/109614344675460069">load average</a> only rose to 1.12 for a very short time. I was pleased with that. While caching does help, my server could cope with that traffic.</p>


<div class="wp-block-image is-style-default">
<figure class="aligncenter size-large"><a href="https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-09.57.25.png?ssl=1"><img data-attachment-id="89589425" data-permalink="https://odd.blog/2023/01/02/the-mastodon-onslaught-on-your-blog/screenshot-2023-01-02-at-09-57-25/" data-orig-file="https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-09.57.25.png?fit=1434%2C1110&amp;ssl=1" data-orig-size="1434,1110" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Screenshot-2023-01-02-at-09.57.25" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-09.57.25.png?fit=300%2C232&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-09.57.25.png?fit=790%2C612&amp;ssl=1" decoding="async" loading="lazy" width="790" height="612" src="https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-09.57.25.png?resize=790%2C612&#038;ssl=1" alt="" class="wp-image-89589425" srcset="https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-09.57.25.png?resize=1024%2C793&amp;ssl=1 1024w, https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-09.57.25.png?resize=300%2C232&amp;ssl=1 300w, https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-09.57.25.png?resize=768%2C594&amp;ssl=1 768w, https://i0.wp.com/odd.blog/files/2023/01/Screenshot-2023-01-02-at-09.57.25.png?w=1434&amp;ssl=1 1434w" sizes="(max-width: 790px) 100vw, 790px" data-recalc-dims="1" /></a><figcaption class="wp-element-caption">A sample of the user agents used by Mastodon instances hitting my blog for previews</figcaption></figure></div>


<p>I suspected that there was one hit per Mastodon instance on my site. I checked my logs and was proved right. For all the accounts that follow me on mastodon.social, only one request was made. That does mean the onslaught of requests isn&#8217;t as bad as it might be. Instead of 1,800 requests for a page, there were far fewer. I did notice that a Friendica instance requested one of my test URLs several times.</p>



<p>Mastodon and other Fediverse servers will start requesting a preview within a second of you sharing your post on the network. It helps if your server is running some sort of caching.</p>



<p>If you have many Mastodon followers or if you&#8217;re worried about a DDoS from Mastodon, the following will help:</p>



<ul>
<li>Make sure Apache/Nginx has the spare capacity to grow quickly and respond to a sudden torrent of requests.</li>



<li>Install a caching plugin like <a href="https://wordpress.org/plugins/wp-super-cache/">WP Super Cache</a>.</li>



<li>Use “expert caching” in WP Super Cache which serves the cached page using mod_rewrite. That will mean your blog post is served almost as fast as requesting a text file from the server. No PHP is executed at all.</li>



<li>Install <a href="https://wordpress.org/plugins/wp-rest-cache/">WP Rest Cache</a> as it will <s>soon</s> cache the embed page request.</li>



<li>Install <a href="https://jetpack.com/">Jetpack</a> and enable the Image Accelerator and Jetpack Boost for human visitors who come later.</li>
</ul>



<p>This problem has existed for a long time. Popular blogs had the same issue when they published new content and people following their blogs (through RSS feed readers, remember them?) hit the server looking for the new post. At least with Mastodon, you can load the post in a private browser window and cache it before sharing it. I want to write a WP Super Cache add-on plugin that allows the site owner to preload a new post as it&#8217;s published. That will ensure the new content is ready for sharing. I haven&#8217;t started work on that yet, so don&#8217;t ask when it&#8217;ll be done. Maybe someone else will beat me to it and claim all the credit!</p>



<p></p>
]]></content:encoded>
					
					<wfw:commentRss>https://odd.blog/2023/01/02/the-mastodon-onslaught-on-your-blog/feed/</wfw:commentRss>
			<slash:comments>6</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
<post-id xmlns="com-wordpress:feed-additions:1">89589420</post-id>	</item>
		<item>
		<title>How to add your blog to Mastodon</title>
		<link>https://odd.blog/2022/11/06/how-to-add-your-blog-to-mastodon/</link>
					<comments>https://odd.blog/2022/11/06/how-to-add-your-blog-to-mastodon/#comments</comments>
		
		<dc:creator><![CDATA[Donncha]]></dc:creator>
		<pubDate>Sun, 06 Nov 2022 19:57:18 +0000</pubDate>
				<category><![CDATA[WordPress]]></category>
		<category><![CDATA[Fediverse]]></category>
		<category><![CDATA[IrishMastodon]]></category>
		<category><![CDATA[IrishTwitter]]></category>
		<category><![CDATA[Mastodon]]></category>
		<category><![CDATA[TwitterMigraton]]></category>
		<guid isPermaLink="false">https://odd.blog/?p=89504202</guid>

					<description><![CDATA[Introduction Before we start, do you know what Mastodon is? It&#8217;s sort of like email, where you can send an email from gmail.com to a yahoo.com account, except it looks very like Twitter. This pcmag article is a good introduction to it. Jeff Jarvis wrote a good post too, and [&#8230;]]]></description>
										<content:encoded><![CDATA[
<p><strong>Introduction</strong></p>



<p>Before we start, do you know what Mastodon is? It&#8217;s sort of like email, where you can send an email from gmail.com to a yahoo.com account, except it looks very like Twitter. This <a href="https://www.pcmag.com/how-to/how-to-get-started-on-mastodon-and-leave-twitter-behind">pcmag article</a> is a good introduction to it. Jeff Jarvis wrote a <a href="https://medium.com/whither-news/hope-for-a-post-musk-net-f156d0cdf431">good post</a> too, and Time Magazine <a href="https://time.com/6229230/mastodon-eugen-rochko-interview/">interviewed Eugen Rochko</a>, the founder of Mastodon that you should read.</p>



<figure class="wp-block-embed aligncenter is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><div class="wp-block-embed__wrapper">
<iframe loading="lazy" class="youtube-player" width="790" height="445" src="https://www.youtube.com/embed/IPSbNdBmWKE?version=3&#038;rel=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;fs=1&#038;hl=en-US&#038;autohide=2&#038;wmode=transparent" allowfullscreen="true" style="border:0;" sandbox="allow-scripts allow-same-origin allow-popups allow-presentation"></iframe>
</div></figure>



<p>This weekend, a probably sizeable chunk of <a rel="tag" class="u-tag u-category" href="https://odd.blog/tag/irishtwitter/">#IrishTwitter</a> migrated to Mastodon. We&#8217;re not the only ones. Twitter has been getting more hateful and acting as an echo chamber for lots of horrible people over the years. The sale of Twitter to Elon Musk, the firing of half the staff, his pronouncements of &#8220;free speech&#8221; all point towards the site being less regulated, less maintained and less moderated. You can&#8217;t deal with complaints if there&#8217;s nobody there listening to complaints of harassment or hate.</p>


<div class="wp-block-image is-style-default">
<figure class="aligncenter size-full"><img data-attachment-id="89504207" data-permalink="https://odd.blog/2022/11/06/how-to-add-your-blog-to-mastodon/caf29c5885858b47/" data-orig-file="https://i0.wp.com/odd.blog/files/2022/11/caf29c5885858b47.jpg?fit=1005%2C565&amp;ssl=1" data-orig-size="1005,565" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="caf29c5885858b47" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2022/11/caf29c5885858b47.jpg?fit=300%2C169&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2022/11/caf29c5885858b47.jpg?fit=790%2C444&amp;ssl=1" decoding="async" loading="lazy" width="790" height="444" src="https://i0.wp.com/odd.blog/files/2022/11/caf29c5885858b47.jpg?resize=790%2C444&#038;ssl=1" alt="" class="wp-image-89504207" srcset="https://i0.wp.com/odd.blog/files/2022/11/caf29c5885858b47.jpg?w=1005&amp;ssl=1 1005w, https://i0.wp.com/odd.blog/files/2022/11/caf29c5885858b47.jpg?resize=300%2C169&amp;ssl=1 300w, https://i0.wp.com/odd.blog/files/2022/11/caf29c5885858b47.jpg?resize=768%2C432&amp;ssl=1 768w" sizes="(max-width: 790px) 100vw, 790px" data-recalc-dims="1" /><figcaption class="wp-element-caption">(No we didn&#8217;t)</figcaption></figure></div>


<p></p>



<p>I don&#8217;t doubt that many of us will continue to visit and contribute to whatever Twitter becomes. Over the last few years, most of my interactions there have been publicising my blog posts. All I could see on there was angry tweets from different people, or people who were broadcasting their top ten ways of doing X, Y or Z. Hardly any actual conversation.</p>



<p>So, Mastodon. I woke up early on Saturday morning and discovered there was a <a rel="tag" class="u-tag u-category" href="https://odd.blog/tag/twittermigraton/">#TwitterMigraton</a> to Mastodon. I already had an account on mastodon.social but Irish Twitter was moving to mastodon.ie, and that&#8217;s where I went too, creating <a href="https://mastodon.ie/@donncha">@donncha@mastodon.ie</a>. </p>


<div class="wp-block-image is-style-default">
<figure class="aligncenter size-full"><a href="https://mastodon.ie/@Drharoldnews/109297557723889180"><img data-attachment-id="89504204" data-permalink="https://odd.blog/2022/11/06/how-to-add-your-blog-to-mastodon/screenshot-2022-11-06-at-19-11-37/" data-orig-file="https://i0.wp.com/odd.blog/files/2022/11/Screenshot-2022-11-06-at-19.11.37.jpg?fit=642%2C441&amp;ssl=1" data-orig-size="642,441" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Screenshot-2022-11-06-at-19.11.37" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2022/11/Screenshot-2022-11-06-at-19.11.37.jpg?fit=300%2C206&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2022/11/Screenshot-2022-11-06-at-19.11.37.jpg?fit=642%2C441&amp;ssl=1" decoding="async" loading="lazy" width="642" height="441" src="https://i0.wp.com/odd.blog/files/2022/11/Screenshot-2022-11-06-at-19.11.37.jpg?resize=642%2C441&#038;ssl=1" alt="" class="wp-image-89504204" srcset="https://i0.wp.com/odd.blog/files/2022/11/Screenshot-2022-11-06-at-19.11.37.jpg?w=642&amp;ssl=1 642w, https://i0.wp.com/odd.blog/files/2022/11/Screenshot-2022-11-06-at-19.11.37.jpg?resize=300%2C206&amp;ssl=1 300w" sizes="(max-width: 642px) 100vw, 642px" data-recalc-dims="1" /></a></figure></div>


<p></p>



<p>Judging from what I&#8217;ve read elsewhere, all mastodon instances are <a href="https://bitcoinhackers.org/@mastodonusercount">experiencing a HUGE surge in user registrations</a> as people look for an alternative to the <s>stinking</s> sinking ship that is Twitter.</p>


<div class="wp-block-image is-style-default">
<figure class="aligncenter size-large"><a href="https://bitcoinhackers.org/@mastodonusercount/109298398614165507"><img data-attachment-id="89504208" data-permalink="https://odd.blog/2022/11/06/how-to-add-your-blog-to-mastodon/145975b0bece7518/" data-orig-file="https://i0.wp.com/odd.blog/files/2022/11/145975b0bece7518.png?fit=1464%2C660&amp;ssl=1" data-orig-size="1464,660" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="145975b0bece7518" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2022/11/145975b0bece7518.png?fit=300%2C135&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2022/11/145975b0bece7518.png?fit=790%2C356&amp;ssl=1" decoding="async" loading="lazy" width="790" height="356" src="https://i0.wp.com/odd.blog/files/2022/11/145975b0bece7518.png?resize=790%2C356&#038;ssl=1" alt="" class="wp-image-89504208" srcset="https://i0.wp.com/odd.blog/files/2022/11/145975b0bece7518.png?resize=1024%2C462&amp;ssl=1 1024w, https://i0.wp.com/odd.blog/files/2022/11/145975b0bece7518.png?resize=300%2C135&amp;ssl=1 300w, https://i0.wp.com/odd.blog/files/2022/11/145975b0bece7518.png?resize=768%2C346&amp;ssl=1 768w, https://i0.wp.com/odd.blog/files/2022/11/145975b0bece7518.png?resize=1200%2C541&amp;ssl=1 1200w, https://i0.wp.com/odd.blog/files/2022/11/145975b0bece7518.png?w=1464&amp;ssl=1 1464w" sizes="(max-width: 790px) 100vw, 790px" data-recalc-dims="1" /></a></figure></div>


<p></p>



<p>On Saturday, the admins of mastodon.ie ran into performance difficulties as they dealt <a href="https://mastodon.ie/@dregin/109296394011395383">with the influx of new users</a>. The site slowed down and people couldn&#8217;t upload images. Over 6,000 people are on that instance now.</p>


<div class="wp-block-image is-style-default">
<figure class="aligncenter size-full"><img data-attachment-id="89504205" data-permalink="https://odd.blog/2022/11/06/how-to-add-your-blog-to-mastodon/ae23c884e442b841/" data-orig-file="https://i0.wp.com/odd.blog/files/2022/11/ae23c884e442b841.png?fit=768%2C580&amp;ssl=1" data-orig-size="768,580" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="ae23c884e442b841" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2022/11/ae23c884e442b841.png?fit=300%2C227&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2022/11/ae23c884e442b841.png?fit=768%2C580&amp;ssl=1" decoding="async" loading="lazy" width="768" height="580" src="https://i0.wp.com/odd.blog/files/2022/11/ae23c884e442b841.png?resize=768%2C580&#038;ssl=1" alt="" class="wp-image-89504205" srcset="https://i0.wp.com/odd.blog/files/2022/11/ae23c884e442b841.png?w=768&amp;ssl=1 768w, https://i0.wp.com/odd.blog/files/2022/11/ae23c884e442b841.png?resize=300%2C227&amp;ssl=1 300w" sizes="(max-width: 768px) 100vw, 768px" data-recalc-dims="1" /><figcaption class="wp-element-caption">Remember the early days of Twitter?</figcaption></figure></div>


<p></p>



<p>The admins increased their hosting plan, eventually maxing out at the top tier. To pay for hosting they <a href="https://opencollective.com/mastodonie">asked for donations</a>. Right now they have raised over €4100!</p>



<p><strong>How do I add my WordPress blog to Mastodon?</strong></p>



<p>It&#8217;s mostly straight forward. Install these two plugins:</p>



<ol>
<li><a href="https://wordpress.org/plugins/activitypub/">ActivityPub</a></li>



<li><a href="https://wordpress.org/plugins/webfinger/">WebFinger</a></li>
</ol>



<p>The installation instructions are unfortunately not great. After you install both plugins, go to your Profile page (Users-&gt;Profile) and scroll right to the end. Down there you will find your profile identifier. It will look like @author@hostname.tld. For this blog that is <strong><a rel="mention" class="u-url mention" href="https://odd.blog/author/donncha/">@<span>donncha</span></a></strong>, and I have my photoblog at <strong><a rel="mention" class="u-url mention" href="https://inphotos.org/author/donncha/">@<span>donncha</span></a></strong>. Search for those on Mastodon and you will find my two blogs. Please feel free to follow!</p>


<div class="wp-block-image is-style-default">
<figure class="aligncenter size-full"><img data-attachment-id="89504203" data-permalink="https://odd.blog/2022/11/06/how-to-add-your-blog-to-mastodon/screenshot-2022-11-06-at-18-57-05/" data-orig-file="https://i0.wp.com/odd.blog/files/2022/11/Screenshot-2022-11-06-at-18.57.05.jpg?fit=746%2C261&amp;ssl=1" data-orig-size="746,261" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="Screenshot-2022-11-06-at-18.57.05" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2022/11/Screenshot-2022-11-06-at-18.57.05.jpg?fit=300%2C105&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2022/11/Screenshot-2022-11-06-at-18.57.05.jpg?fit=746%2C261&amp;ssl=1" decoding="async" loading="lazy" width="746" height="261" src="https://i0.wp.com/odd.blog/files/2022/11/Screenshot-2022-11-06-at-18.57.05.jpg?resize=746%2C261&#038;ssl=1" alt="" class="wp-image-89504203" srcset="https://i0.wp.com/odd.blog/files/2022/11/Screenshot-2022-11-06-at-18.57.05.jpg?w=746&amp;ssl=1 746w, https://i0.wp.com/odd.blog/files/2022/11/Screenshot-2022-11-06-at-18.57.05.jpg?resize=300%2C105&amp;ssl=1 300w" sizes="(max-width: 746px) 100vw, 746px" data-recalc-dims="1" /></figure></div>


<p></p>



<p>When a post is made and shared on Mastodon, it allows others to reply. Those replies to the <a href="https://mastodon.social/@Gargron/108352419081380277">toot</a> on Mastodon will be sent to your WordPress blog as a <a href="https://inphotos.org/2022/11/06/on-stage-in-coughlans-bar/#comment-385708">comment</a>! That <a href="https://mastodon.ie/@donncha/109296714735893201">blew my mind</a> when I discovered that!</p>



<p><strong>Troubleshooting</strong></p>



<p>I discovered that running the plugins on a multi-site WordPress install will cause problems. Instead of activating it on the root install, you need to activate it on each one. I presume that&#8217;s maybe because the rewrite rules are added on plugin activation, but that&#8217;s just a guess.</p>



<p>If you have caching you might want to turn it off, or at the very least disable caching in /.well-known/ as that&#8217;s where Mastodon and other services will query your server for updated information.</p>



<p>It can take 10 to 15 minutes before a new post is seen. Be patient!</p>



<p><strong>Why not?</strong></p>



<p>There&#8217;s one reason you might not want to do this. Your blog will be on a Fediverse instance by itself. Your blog posts will only show if someone is following it, or <a href="https://inphotos.org/2022/11/06/on-stage-in-coughlans-bar/">you boost the toots on Mastodon</a>, or in the Federated feed. They won&#8217;t show in the Local Feed of your Mastodon instance. The best way around this is by careful use of relevant hashtags, but please don&#8217;t spam them, or you&#8217;ll be blocked.</p>


<div class="wp-block-image is-style-default">
<figure class="aligncenter size-large"><img data-attachment-id="89504206" data-permalink="https://odd.blog/2022/11/06/how-to-add-your-blog-to-mastodon/53875efe9eddd556/" data-orig-file="https://i0.wp.com/odd.blog/files/2022/11/53875efe9eddd556.jpg?fit=828%2C1141&amp;ssl=1" data-orig-size="828,1141" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="53875efe9eddd556" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2022/11/53875efe9eddd556.jpg?fit=218%2C300&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2022/11/53875efe9eddd556.jpg?fit=743%2C1024&amp;ssl=1" decoding="async" loading="lazy" width="743" height="1024" src="https://i0.wp.com/odd.blog/files/2022/11/53875efe9eddd556.jpg?resize=743%2C1024&#038;ssl=1" alt="" class="wp-image-89504206" srcset="https://i0.wp.com/odd.blog/files/2022/11/53875efe9eddd556.jpg?resize=743%2C1024&amp;ssl=1 743w, https://i0.wp.com/odd.blog/files/2022/11/53875efe9eddd556.jpg?resize=218%2C300&amp;ssl=1 218w, https://i0.wp.com/odd.blog/files/2022/11/53875efe9eddd556.jpg?resize=768%2C1058&amp;ssl=1 768w, https://i0.wp.com/odd.blog/files/2022/11/53875efe9eddd556.jpg?w=828&amp;ssl=1 828w" sizes="(max-width: 743px) 100vw, 743px" data-recalc-dims="1" /></figure></div>


<p></p>



<p><strong>Alternatives</strong></p>



<p>You can hook your WordPress blog to your account too. I haven&#8217;t used them, but I saw two people use these plugins. Those posts will appear in the Local Feed of your Mastodon instance, which is a plus for discoverability.</p>



<ol>
<li><a href="https://wordpress.org/plugins/autopost-to-mastodon/">Mastodon Autopost</a></li>



<li><a href="https://wordpress.org/plugins/syndication-links/">Syndication Links</a></li>
</ol>



<p>You can also use IFTTT if your site can&#8217;t run plugins, and you have an RSS feed. Some details in <a href="https://hyperborea.org/journal/2017/12/mastodon-ifttt/">this blog post</a>. Thanks Sandy for that link!</p>



<p>I&#8217;m very excited about this. Is it too early to say that there&#8217;s enough momentum to sustain a <a rel="tag" class="u-tag u-category" href="https://odd.blog/tag/irishmastodon/">#IrishMastodon</a> community? I hope it succeeds.</p>



<p>Edit: George has a <a href="https://g13g.blog/2021/03/16/get-your-blog-posts-on-mastodon/">guide on his blog</a> explaining how to do the same thing but points out that you need the WebMention plugin to receive replies as comments. I saw replies to my toots appear here as comments, but only if they were direct replies. If I replied to someone who replied to my blog that reply wouldn&#8217;t show as a comment, and I just tested that again and WebMention doesn&#8217;t change that, unfortunately.</p>



<p><a href="https://matthewthom.as/">Matthew Thomas</a> has created a remote follow tool called apfollow, with <a href="https://github.com/mwt/apfollow/">source available</a>. This creates a page where you can follow a Mastodon account by entering your own details in a box and it redirects you to your home server to do the follow. Here&#8217;s a <a href="https://apfollow.mwt.me/?user=donncha&amp;instance=mastodon.ie">link to follow</a> my Mastodon.ie account. It fails for me, but maybe that&#8217;s something to do with mastodon.ie settings. I&#8217;ll fill out a bug report but it looks promising.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://odd.blog/2022/11/06/how-to-add-your-blog-to-mastodon/feed/</wfw:commentRss>
			<slash:comments>29</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
<post-id xmlns="com-wordpress:feed-additions:1">89504202</post-id>	</item>
		<item>
		<title>How to &#8220;remember me&#8221; on the WordPress login page</title>
		<link>https://odd.blog/2022/10/04/how-to-remember-me-on-the-wordpress-login-page/</link>
					<comments>https://odd.blog/2022/10/04/how-to-remember-me-on-the-wordpress-login-page/#respond</comments>
		
		<dc:creator><![CDATA[Donncha]]></dc:creator>
		<pubDate>Tue, 04 Oct 2022 17:25:00 +0000</pubDate>
				<category><![CDATA[WordPress]]></category>
		<guid isPermaLink="false">https://odd.blog/?p=89504145</guid>

					<description><![CDATA[If you&#8217;re like me: You&#8217;re the only one who logs into your WordPress website. You only do it on your computer at home. You lock your computer every time you step away, even when there&#8217;s nobody at home. You have a 2FA plugin which adds a new field, and means [&#8230;]]]></description>
										<content:encoded><![CDATA[
<p>If you&#8217;re like me:</p>



<ol><li>You&#8217;re the only one who logs into your WordPress website.</li><li>You only do it on your computer at home.</li><li>You lock your computer every time you step away, even when there&#8217;s nobody at home.</li><li>You have a 2FA plugin which adds a new field, and means checking your phone on each login.</li></ol>



<p>You might have become annoyed from time to time when you forget to check the &#8220;Remember me&#8221; checkbox on the login page. You know that you will have to log in again tomorrow or whenever the login session expires, rather than in 2 weeks time. Just because of an empty checkbox.</p>



<p>There&#8217;s very valid reasons for not checking this box. If you use a public computer, or one in an office and don&#8217;t lock your computer, then you want to be logged out. For the rest of us, it&#8217;s a bonus if you don&#8217;t need to login again so soon.</p>



<p>Here&#8217;s a tiny little script that will check the &#8220;remember me&#8221; checkbox. Create a php script called remember-me.php in wp-content/mu-plugin/ with the following:</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: php; title: ; notranslate">
&lt;?php
function remember_me_on_login() {
    $_POST&#91;'rememberme'] = 1;
}
add_action( 'login_init', 'remember_me_on_login' );
</pre></div>


<p>Then logout and visit wp-login.php and &#8220;remember me&#8221; will be checked for you!</p>



<p>If you want more control, there&#8217;s the <a href="https://wordpress.org/plugins/jonradio-remember-me/">Remember Me</a> plugin, but it does the basic job in a similar way.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://odd.blog/2022/10/04/how-to-remember-me-on-the-wordpress-login-page/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
<post-id xmlns="com-wordpress:feed-additions:1">89504145</post-id>	</item>
		<item>
		<title>Hide featured image if it&#8217;s in the post</title>
		<link>https://odd.blog/2020/10/08/hide-featured-image-if-its-in-the-post/</link>
					<comments>https://odd.blog/2020/10/08/hide-featured-image-if-its-in-the-post/#respond</comments>
		
		<dc:creator><![CDATA[Donncha]]></dc:creator>
		<pubDate>Thu, 08 Oct 2020 20:43:35 +0000</pubDate>
				<category><![CDATA[WordPress]]></category>
		<category><![CDATA[irishblogs]]></category>
		<category><![CDATA[photoblog]]></category>
		<guid isPermaLink="false">https://odd.blog/?p=89503242</guid>

					<description><![CDATA[I&#8217;ve been running a photoblog at inphotos.org since 2005 on WordPress. (And thanks to writing this I noticed it&#8217;s 15 years old today!) In that time WordPress has changed dramatically. At first I used Flickr to host my images, but after a short time I hosted the images myself. (Good [&#8230;]]]></description>
										<content:encoded><![CDATA[
<p>I&#8217;ve been running a photoblog at <a href="https://inphotos.org/">inphotos.org</a> since 2005 on WordPress. (And thanks to writing this I noticed it&#8217;s <a href="https://inphotos.org/2005/10/08/yellow-flower/">15 years old today</a>!)</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img data-attachment-id="89503246" data-permalink="https://odd.blog/2020/10/08/hide-featured-image-if-its-in-the-post/50434559_92c589c7f3_o/" data-orig-file="https://i0.wp.com/odd.blog/files/2020/10/50434559_92c589c7f3_o-rotated.jpg?fit=700%2C525&amp;ssl=1" data-orig-size="700,525" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;4&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;DMC-FZ5&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1128146039&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;6&quot;,&quot;iso&quot;:&quot;200&quot;,&quot;shutter_speed&quot;:&quot;0.008&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;,&quot;exposure_bias&quot;:&quot;0\/100&quot;,&quot;flash&quot;:&quot;16&quot;}" data-image-title="50434559_92c589c7f3_o" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2020/10/50434559_92c589c7f3_o-rotated.jpg?fit=300%2C225&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2020/10/50434559_92c589c7f3_o-rotated.jpg?fit=700%2C525&amp;ssl=1" decoding="async" loading="lazy" width="700" height="525" src="https://i0.wp.com/odd.blog/files/2020/10/50434559_92c589c7f3_o-rotated.jpg?resize=700%2C525&#038;ssl=1" alt="" class="wp-image-89503246" srcset="https://i0.wp.com/odd.blog/files/2020/10/50434559_92c589c7f3_o-rotated.jpg?w=700&amp;ssl=1 700w, https://i0.wp.com/odd.blog/files/2020/10/50434559_92c589c7f3_o-rotated.jpg?resize=300%2C225&amp;ssl=1 300w" sizes="(max-width: 700px) 100vw, 700px" data-recalc-dims="1" /></figure></div>



<p>In that time WordPress has changed dramatically. At first I used Flickr to host my images, but after a short time I hosted the images myself. (Good thing too since Flickr limited free user accounts to 1000 images, so I wrote <a href="https://github.com/donnchawp/bye-bye-flickr">a script to download</a> the Flickr images I used in posts.)</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img data-attachment-id="89503249" data-permalink="https://odd.blog/2020/10/08/hide-featured-image-if-its-in-the-post/2020-09-25-115416-m-1/" data-orig-file="https://i0.wp.com/odd.blog/files/2020/10/2020-09-25-115416-m-1.jpg?fit=1280%2C1280&amp;ssl=1" data-orig-size="1280,1280" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;2.4&quot;,&quot;credit&quot;:&quot;Donncha O Caoimh&quot;,&quot;camera&quot;:&quot;SM-G965F&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1601034856&quot;,&quot;copyright&quot;:&quot;Donncha O Caoimh (http:\/\/inphotos.org\/)&quot;,&quot;focal_length&quot;:&quot;4.3&quot;,&quot;iso&quot;:&quot;50&quot;,&quot;shutter_speed&quot;:&quot;0.0020408163265306&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;,&quot;exposure_bias&quot;:&quot;0\/10&quot;}" data-image-title="2020-09-25-115416-m-1" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2020/10/2020-09-25-115416-m-1.jpg?fit=300%2C300&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2020/10/2020-09-25-115416-m-1.jpg?fit=790%2C790&amp;ssl=1" decoding="async" loading="lazy" width="790" height="790" src="https://i0.wp.com/odd.blog/files/2020/10/2020-09-25-115416-m-1.jpg?resize=790%2C790&#038;ssl=1" alt="" class="wp-image-89503249" srcset="https://i0.wp.com/odd.blog/files/2020/10/2020-09-25-115416-m-1.jpg?resize=1024%2C1024&amp;ssl=1 1024w, https://i0.wp.com/odd.blog/files/2020/10/2020-09-25-115416-m-1.jpg?resize=300%2C300&amp;ssl=1 300w, https://i0.wp.com/odd.blog/files/2020/10/2020-09-25-115416-m-1.jpg?resize=150%2C150&amp;ssl=1 150w, https://i0.wp.com/odd.blog/files/2020/10/2020-09-25-115416-m-1.jpg?resize=768%2C768&amp;ssl=1 768w, https://i0.wp.com/odd.blog/files/2020/10/2020-09-25-115416-m-1.jpg?resize=1200%2C1200&amp;ssl=1 1200w, https://i0.wp.com/odd.blog/files/2020/10/2020-09-25-115416-m-1.jpg?w=1280&amp;ssl=1 1280w" sizes="(max-width: 790px) 100vw, 790px" data-recalc-dims="1" /></figure></div>



<p>For quite a long time I used the featured image instead of inserting the image into the post content, but then about two years ago I went back to inserting the photo into the post. Unfortunately that meant the photo was shown twice, once as a featured image, and once in the post content.</p>



<p>The last theme I used supported custom post types, one of which was a photo type that displayed the featured image but hid the post content. It was an ok compromise, but not perfect.</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img data-attachment-id="89503251" data-permalink="https://odd.blog/2020/10/08/hide-featured-image-if-its-in-the-post/2019-07-10-133006-m/" data-orig-file="https://i0.wp.com/odd.blog/files/2020/10/2019-07-10-133006-m.jpg?fit=960%2C1280&amp;ssl=1" data-orig-size="960,1280" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;2.4&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;SM-G965F&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1562765405&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;4.3&quot;,&quot;iso&quot;:&quot;50&quot;,&quot;shutter_speed&quot;:&quot;0.00625&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;,&quot;exposure_bias&quot;:&quot;0\/100&quot;}" data-image-title="2019-07-10-133006-m" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2020/10/2019-07-10-133006-m.jpg?fit=225%2C300&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2020/10/2019-07-10-133006-m.jpg?fit=768%2C1024&amp;ssl=1" decoding="async" loading="lazy" width="768" height="1024" src="https://i0.wp.com/odd.blog/files/2020/10/2019-07-10-133006-m.jpg?resize=768%2C1024&#038;ssl=1" alt="" class="wp-image-89503251" srcset="https://i0.wp.com/odd.blog/files/2020/10/2019-07-10-133006-m.jpg?resize=768%2C1024&amp;ssl=1 768w, https://i0.wp.com/odd.blog/files/2020/10/2019-07-10-133006-m.jpg?resize=225%2C300&amp;ssl=1 225w, https://i0.wp.com/odd.blog/files/2020/10/2019-07-10-133006-m.jpg?w=960&amp;ssl=1 960w" sizes="(max-width: 768px) 100vw, 768px" data-recalc-dims="1" /></figure></div>



<p>Recently I started using Twenty Twenty, but after 15 years I had a mixture of posts with:</p>



<ul><li>Featured image with no image in the post.</li><li>Featured image with the same image in the post.</li></ul>



<p>I knew I needed something more flexible. I wanted to hide the featured image if it also appeared in the post content. I procrastinated and never got around to it until this evening when I discovered it was actually quite easy. </p>



<figure class="wp-block-image size-large"><img data-attachment-id="89503250" data-permalink="https://odd.blog/2020/10/08/hide-featured-image-if-its-in-the-post/2020-07-17-09410-m/" data-orig-file="https://i0.wp.com/odd.blog/files/2020/10/2020-07-17-09410-m.jpg?fit=1280%2C853&amp;ssl=1" data-orig-size="1280,853" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;6.3&quot;,&quot;credit&quot;:&quot;Donncha O Caoimh&quot;,&quot;camera&quot;:&quot;ILCE-7M3&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1594940779&quot;,&quot;copyright&quot;:&quot;Donncha O Caoimh (http:\/\/inphotos.org\/)&quot;,&quot;focal_length&quot;:&quot;42&quot;,&quot;iso&quot;:&quot;2000&quot;,&quot;shutter_speed&quot;:&quot;15&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;,&quot;exposure_bias&quot;:&quot;0\/10&quot;,&quot;flash&quot;:&quot;16&quot;}" data-image-title="2020-07-17-09410-m" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2020/10/2020-07-17-09410-m.jpg?fit=300%2C200&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2020/10/2020-07-17-09410-m.jpg?fit=790%2C526&amp;ssl=1" decoding="async" loading="lazy" width="790" height="526" src="https://i0.wp.com/odd.blog/files/2020/10/2020-07-17-09410-m.jpg?resize=790%2C526&#038;ssl=1" alt="" class="wp-image-89503250" srcset="https://i0.wp.com/odd.blog/files/2020/10/2020-07-17-09410-m.jpg?resize=1024%2C682&amp;ssl=1 1024w, https://i0.wp.com/odd.blog/files/2020/10/2020-07-17-09410-m.jpg?resize=300%2C200&amp;ssl=1 300w, https://i0.wp.com/odd.blog/files/2020/10/2020-07-17-09410-m.jpg?resize=768%2C512&amp;ssl=1 768w, https://i0.wp.com/odd.blog/files/2020/10/2020-07-17-09410-m.jpg?resize=1200%2C800&amp;ssl=1 1200w, https://i0.wp.com/odd.blog/files/2020/10/2020-07-17-09410-m.jpg?w=1280&amp;ssl=1 1280w" sizes="(max-width: 790px) 100vw, 790px" data-recalc-dims="1" /></figure>



<p>Copy the following code into the function.php of your child theme and you&#8217;ll be all set! It relies on you having unique filenames for your images. If you don&#8217;t then remove the call to <code>basename()</code>, and that may help.</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: php; auto-links: false; gutter: false; title: ; notranslate">
function maybe_remove_featured_image( $html ) {
        if ( $html == '' ) {
                return '';
        }
        $post = get_post();
        $post_thumbnail_id = get_post_thumbnail_id( $post );
        if ( ! $post_thumbnail_id ) {
                return $html;
        }

        $image_url = wp_get_attachment_image_src( $post_thumbnail_id );
        if ( ! $image_url ) {
                return $html;
        }

        $image_filename = basename( parse_url( $image_url&#91;0], PHP_URL_PATH ) );
        if ( strpos( $post-&gt;post_content, $image_filename ) ) {
                return '';
        } else {
                return $html;
        }
}
add_filter( 'post_thumbnail_html', 'maybe_remove_featured_image' );
</pre></div>


<p>The <code>post_thumbnail_html</code> filter acts on the html generated to display the featured image. My code above gets the filename of the featured image, checks if it&#8217;s in the current post and if it is returns a blank string. Feedback welcome if you have a better way of doing this!</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img data-attachment-id="89503252" data-permalink="https://odd.blog/2020/10/08/hide-featured-image-if-its-in-the-post/2020-03-02-07706-m/" data-orig-file="https://i0.wp.com/odd.blog/files/2020/10/2020-03-02-07706-m.jpg?fit=1280%2C853&amp;ssl=1" data-orig-size="1280,853" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;6.3&quot;,&quot;credit&quot;:&quot;Donncha O Caoimh&quot;,&quot;camera&quot;:&quot;ILCE-7M3&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1583188908&quot;,&quot;copyright&quot;:&quot;Donncha O Caoimh (http:\/\/inphotos.org\/)&quot;,&quot;focal_length&quot;:&quot;300&quot;,&quot;iso&quot;:&quot;25600&quot;,&quot;shutter_speed&quot;:&quot;0.003125&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;,&quot;exposure_bias&quot;:&quot;0\/10&quot;,&quot;flash&quot;:&quot;16&quot;}" data-image-title="2020-03-02-07706-m" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2020/10/2020-03-02-07706-m.jpg?fit=300%2C200&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2020/10/2020-03-02-07706-m.jpg?fit=790%2C526&amp;ssl=1" decoding="async" loading="lazy" width="790" height="526" src="https://i0.wp.com/odd.blog/files/2020/10/2020-03-02-07706-m.jpg?resize=790%2C526&#038;ssl=1" alt="" class="wp-image-89503252" srcset="https://i0.wp.com/odd.blog/files/2020/10/2020-03-02-07706-m.jpg?resize=1024%2C682&amp;ssl=1 1024w, https://i0.wp.com/odd.blog/files/2020/10/2020-03-02-07706-m.jpg?resize=300%2C200&amp;ssl=1 300w, https://i0.wp.com/odd.blog/files/2020/10/2020-03-02-07706-m.jpg?resize=768%2C512&amp;ssl=1 768w, https://i0.wp.com/odd.blog/files/2020/10/2020-03-02-07706-m.jpg?resize=1200%2C800&amp;ssl=1 1200w, https://i0.wp.com/odd.blog/files/2020/10/2020-03-02-07706-m.jpg?w=1280&amp;ssl=1 1280w" sizes="(max-width: 790px) 100vw, 790px" data-recalc-dims="1" /></figure></div>



<p></p>
]]></content:encoded>
					
					<wfw:commentRss>https://odd.blog/2020/10/08/hide-featured-image-if-its-in-the-post/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
<post-id xmlns="com-wordpress:feed-additions:1">89503242</post-id>	</item>
		<item>
		<title>Crowdsignal Polls in your Block Editor</title>
		<link>https://odd.blog/2020/07/27/crowdsignal-polls-in-your-block-editor/</link>
					<comments>https://odd.blog/2020/07/27/crowdsignal-polls-in-your-block-editor/#respond</comments>
		
		<dc:creator><![CDATA[Donncha]]></dc:creator>
		<pubDate>Mon, 27 Jul 2020 19:17:46 +0000</pubDate>
				<category><![CDATA[WordPress]]></category>
		<category><![CDATA[block editor]]></category>
		<category><![CDATA[Crowdsignal]]></category>
		<category><![CDATA[polls]]></category>
		<guid isPermaLink="false">https://odd.blog/?p=89503098</guid>

					<description><![CDATA[The Crowdsignal team at Automattic have been quietly working on a new poll block for the last few weeks. We finally made it public today on WordPress.org! We set out with the task of creating a block that would allow the writer to quickly insert a poll in their posts [&#8230;]]]></description>
										<content:encoded><![CDATA[<div class="align crowdsignal-poll-wrapper" data-crowdsignal-poll="{&quot;pollId&quot;:&quot;acadcbbf-4f40-437c-9b7a-d3b18aa762b9&quot;,&quot;question&quot;:&quot;Would you like a poll block?&quot;,&quot;note&quot;:&quot;This is a poll editor that you can edit within the block editor!&quot;,&quot;answers&quot;:[{&quot;text&quot;:&quot;Yes!&quot;,&quot;answerId&quot;:&quot;36d96dcb-d6d3-4580-bda2-40b8bc12fe01&quot;},{&quot;text&quot;:&quot;Of course!&quot;,&quot;answerId&quot;:&quot;fc0a1b12-2fa5-492e-9326-0f9c9da2e943&quot;},{&quot;text&quot;:&quot;No, I.. Oh, you got me. It goes without saying I do!&quot;,&quot;answerId&quot;:&quot;9b8ed635-4451-4098-a81a-33b20ffbdb56&quot;}],&quot;submitButtonBackgroundColor&quot;:&quot;#1e73be&quot;,&quot;borderColor&quot;:&quot;#1e73be&quot;,&quot;isMultipleChoice&quot;:false,&quot;submitButtonLabel&quot;:&quot;Submit&quot;,&quot;confirmMessageType&quot;:&quot;results&quot;,&quot;borderWidth&quot;:2,&quot;borderRadius&quot;:0,&quot;hasBoxShadow&quot;:false,&quot;hasOneResponsePerComputer&quot;:false,&quot;randomizeAnswers&quot;:false,&quot;width&quot;:100,&quot;pollStatus&quot;:&quot;open&quot;,&quot;closedPollState&quot;:&quot;show-results&quot;,&quot;hideBranding&quot;:true,&quot;buttonAlignment&quot;:&quot;list&quot;,&quot;friendsVisibility&quot;:&quot;&quot;,&quot;apiPollData&quot;:{&quot;id&quot;:10584813,&quot;question&quot;:&quot;Would you like a poll block?&quot;,&quot;note&quot;:&quot;This is a poll editor that you can edit within the block editor!&quot;,&quot;settings&quot;:{&quot;title&quot;:&quot;Would you like a poll block?&quot;,&quot;after_vote&quot;:&quot;results&quot;,&quot;after_message&quot;:&quot;&quot;,&quot;randomize_answers&quot;:false,&quot;restrict_vote_repeat&quot;:false,&quot;captcha&quot;:false,&quot;multiple_choice&quot;:false,&quot;redirect_url&quot;:&quot;&quot;,&quot;close_status&quot;:&quot;open&quot;,&quot;close_after&quot;:1595691180},&quot;answers&quot;:[{&quot;answer_text&quot;:&quot;Yes!&quot;,&quot;id&quot;:49016876,&quot;client_id&quot;:&quot;36d96dcb-d6d3-4580-bda2-40b8bc12fe01&quot;},{&quot;answer_text&quot;:&quot;Of course!&quot;,&quot;id&quot;:49016877,&quot;client_id&quot;:&quot;fc0a1b12-2fa5-492e-9326-0f9c9da2e943&quot;},{&quot;answer_text&quot;:&quot;No, I.. Oh, you got me. It goes without saying I do!&quot;,&quot;id&quot;:49016878,&quot;client_id&quot;:&quot;9b8ed635-4451-4098-a81a-33b20ffbdb56&quot;}],&quot;client_id&quot;:&quot;acadcbbf-4f40-437c-9b7a-d3b18aa762b9&quot;}}"></div>


<p>The <a href="https://crowdsignal.com/">Crowdsignal</a> team at Automattic have been quietly working on a new <a href="https://wordpress.org/plugins/crowdsignal-forms/">poll block</a> for the last few weeks. We finally made it public today on WordPress.org!</p>



<div class="wp-block-image"><figure class="aligncenter"><img data-attachment-id="89503102" data-permalink="https://odd.blog/2020/07/27/crowdsignal-polls-in-your-block-editor/screenshot-2020-07-27-at-16-32-31/" data-orig-file="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-16.32.31.png?fit=544%2C286&amp;ssl=1" data-orig-size="544,286" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Screenshot-2020-07-27-at-16.32.31" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-16.32.31.png?fit=300%2C158&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-16.32.31.png?fit=544%2C286&amp;ssl=1" decoding="async" loading="lazy" width="544" height="286" src="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-16.32.31.png?resize=544%2C286&#038;ssl=1" alt="" class="wp-image-89503102" srcset="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-16.32.31.png?w=544&amp;ssl=1 544w, https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-16.32.31.png?resize=300%2C158&amp;ssl=1 300w" sizes="(max-width: 544px) 100vw, 544px" data-recalc-dims="1" /></figure></div>



<p>We set out with the task of creating a block that would allow the writer to quickly insert a poll in their posts using the block editor. More than that, it had to be simple to use. It also needed to be themed to match the look and feel of the website it would appear on.</p>



<div class="wp-block-image size-large"><figure class="aligncenter size-large"><img data-attachment-id="89503109" data-permalink="https://odd.blog/2020/07/27/crowdsignal-polls-in-your-block-editor/screenshot-2020-07-27-at-20-01-55/" data-orig-file="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-20.01.55.png?fit=690%2C701&amp;ssl=1" data-orig-size="690,701" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Screenshot-2020-07-27-at-20.01.55" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-20.01.55.png?fit=295%2C300&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-20.01.55.png?fit=690%2C701&amp;ssl=1" decoding="async" loading="lazy" width="690" height="701" src="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-20.01.55.png?resize=690%2C701&#038;ssl=1" alt="" class="wp-image-89503109" srcset="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-20.01.55.png?w=690&amp;ssl=1 690w, https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-20.01.55.png?resize=295%2C300&amp;ssl=1 295w" sizes="(max-width: 690px) 100vw, 690px" data-recalc-dims="1" /></figure></div>



<p>We&#8217;ve created a block that does that. It also records the votes collected on the Crowdsignal website where you can analyse the results using reports Crowdsignal users have always used.</p>



<div class="wp-block-image size-large"><figure class="aligncenter"><img data-attachment-id="89503104" data-permalink="https://odd.blog/2020/07/27/crowdsignal-polls-in-your-block-editor/screenshot-2020-07-27-at-18-05-06/" data-orig-file="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-18.05.06.png?fit=594%2C189&amp;ssl=1" data-orig-size="594,189" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Screenshot-2020-07-27-at-18.05.06" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-18.05.06.png?fit=300%2C95&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-18.05.06.png?fit=594%2C189&amp;ssl=1" decoding="async" loading="lazy" width="594" height="189" src="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-18.05.06.png?resize=594%2C189&#038;ssl=1" alt="" class="wp-image-89503104" srcset="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-18.05.06.png?w=594&amp;ssl=1 594w, https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-18.05.06.png?resize=300%2C95&amp;ssl=1 300w" sizes="(max-width: 594px) 100vw, 594px" data-recalc-dims="1" /></figure></div>



<p>Search for &#8220;Crowdsignal Forms&#8221; on your plugins page to install it in the usual way.</p>



<p>A free <a href="https://crowdsignal.com/">Crowdsignal</a> account is required to use the block. We made it really easy to connect your site to your Crowdsignal account. If you don&#8217;t have one then creating a new account is simple too.</p>



<div class="wp-block-image"><figure class="aligncenter size-large"><img data-attachment-id="89503115" data-permalink="https://odd.blog/2020/07/27/crowdsignal-polls-in-your-block-editor/screenshot-2020-07-27-at-20-12-48/" data-orig-file="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-20.12.48.png?fit=257%2C429&amp;ssl=1" data-orig-size="257,429" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Screenshot-2020-07-27-at-20.12.48" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-20.12.48.png?fit=180%2C300&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-20.12.48.png?fit=257%2C429&amp;ssl=1" decoding="async" loading="lazy" width="257" height="429" src="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-20.12.48.png?resize=257%2C429&#038;ssl=1" alt="" class="wp-image-89503115" srcset="https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-20.12.48.png?w=257&amp;ssl=1 257w, https://i0.wp.com/odd.blog/files/2020/07/Screenshot-2020-07-27-at-20.12.48.png?resize=180%2C300&amp;ssl=1 180w" sizes="(max-width: 257px) 100vw, 257px" data-recalc-dims="1" /></figure></div>



<p>The first 2,500 responses you collect are included in your free account, and further votes are recorded but free users are encouraged to upgrade if they want to do further analysis of all the data they collect.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://odd.blog/2020/07/27/crowdsignal-polls-in-your-block-editor/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
<post-id xmlns="com-wordpress:feed-additions:1">89503098</post-id>	</item>
		<item>
		<title>WP Super Cache 1.6.9: security update</title>
		<link>https://odd.blog/2019/07/25/wp-super-cache-1-6-9-security-update/</link>
					<comments>https://odd.blog/2019/07/25/wp-super-cache-1-6-9-security-update/#comments</comments>
		
		<dc:creator><![CDATA[Donncha]]></dc:creator>
		<pubDate>Thu, 25 Jul 2019 12:57:00 +0000</pubDate>
				<category><![CDATA[WordPress]]></category>
		<category><![CDATA[wp-super-cache]]></category>
		<guid isPermaLink="false">https://odd.blog/?p=89502593</guid>

					<description><![CDATA[WP Super Cache is a full page caching plugin for WordPress. Version 1.6.9 has just been released and is a required upgrade for all users as it resolves a security issue in the debug log. The issue can only be exploited if debugging is enabled in the plugin which will [&#8230;]]]></description>
										<content:encoded><![CDATA[
<p><a href="https://wordpress.org/plugins/wp-super-cache/">WP Super Cache</a> is a full page caching plugin for WordPress.</p>



<p>Version 1.6.9 has just been released and is a required upgrade for all users as it resolves a security issue in the debug log. The issue can only be exploited if debugging is enabled in the plugin which will not be the case for almost all users.</p>



<p>The debug log is usually only enabled temporarily if a site owner is debugging a caching problem and isn&#8217;t something that should be left on permanently as it will slow down a site.</p>



<p>If there is an existing debug log it will be deleted after updating the plugin.</p>



<p>This release also improves the debug log by hiding sensitive data such as the ABSPATH  directory of the WordPress install and login cookies. Unfortunately in the past users have copied the log file data into forum posts. A warning message has been added asking the site owner not to publish the debug log.</p>



<p>Details of the security issue will be added to this post in time to allow sites to update their plugin.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://odd.blog/2019/07/25/wp-super-cache-1-6-9-security-update/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
<post-id xmlns="com-wordpress:feed-additions:1">89502593</post-id>	</item>
		<item>
		<title>WP Super Cache 1.6.3</title>
		<link>https://odd.blog/2018/08/17/wp-super-cache-1-6-3/</link>
					<comments>https://odd.blog/2018/08/17/wp-super-cache-1-6-3/#comments</comments>
		
		<dc:creator><![CDATA[Donncha]]></dc:creator>
		<pubDate>Fri, 17 Aug 2018 16:36:51 +0000</pubDate>
				<category><![CDATA[WordPress]]></category>
		<category><![CDATA[irishblogs]]></category>
		<category><![CDATA[wp-super-cache]]></category>
		<guid isPermaLink="false">https://odd.blog/?p=89502017</guid>

					<description><![CDATA[WP Super Cache is a full page caching plugin for WordPress. When a page is cached almost all of WordPress is skipped and the page is sent to the browser with the minimum amount of code executed. This makes the page load much faster. 1.6.3 is the latest release and [&#8230;]]]></description>
										<content:encoded><![CDATA[
<p>WP Super Cache is a full page caching plugin for WordPress. When a page is cached almost all of WordPress is skipped and the page is sent to the browser with the minimum amount of code executed. This makes the page load much faster.</p>



<p>1.6.3 is the latest release and is mostly a bugfix release but it also adds some new features.</p>



<ul><li>Added cookie helper functions (<a href="https://github.com/Automattic/wp-super-cache/pull/580">#580</a>)</li><li>Added plugin helper functions (<a href="https://github.com/Automattic/wp-super-cache/pull/574">#574</a>)</li><li>Added actions to modify cookie and plugin lists. (<a href="https://github.com/Automattic/wp-super-cache/pull/582">#582</a>)</li><li>Really disable garbage collection when timeout = 0 (<a href="https://github.com/Automattic/wp-super-cache/pull/571">#571</a>)</li><li>Added warnings about DISABLE_WP_CRON (<a href="https://github.com/Automattic/wp-super-cache/pull/575">#575</a>)</li><li>Don&#8217;t clean expired cache files after preload if garbage collection is disabled (<a href="https://github.com/Automattic/wp-super-cache/pull/572">#572</a>)</li><li>On preload, if deleting a post don&#8217;t delete the sub directories if it&#8217;s the homepage. (<a href="https://github.com/Automattic/wp-super-cache/pull/573">#573</a>)</li><li>Fix generation of semaphores when using WP CLI (<a href="https://github.com/Automattic/wp-super-cache/pull/576">#576</a>)</li><li>Fix deleting from the admin bar (<a href="https://github.com/Automattic/wp-super-cache/pull/578">#578</a>)</li><li>Avoid a strpos() warning. (<a href="https://github.com/Automattic/wp-super-cache/pull/579">#579</a>)</li><li>Improve deleting of cache in edit/delete/publish actions (<a href="https://github.com/Automattic/wp-super-cache/pull/577">#577</a>)</li><li>Fixes to headers code (<a href="https://github.com/Automattic/wp-super-cache/pull/496">#496</a>)</li></ul>



<p>This release makes it much easier for plugin developers to interact with WP Super Cache. In the past a file had to be placed in the &#8220;WP Super Cache plugins directory&#8221; so that it would be loaded correctly but in this release I&#8217;ve added new actions that will allow you to load code from other directories too.</p>



<p>Use the <strong>wpsc_add_plugin</strong> action to add your plugin to a list loaded by WP Super Cache. Use it like this:<br/></p>



<pre class="wp-block-preformatted">do_action( 'wpsc_add_plugin', WP_PLUGIN_DIR . '/wpsc.php' )</pre>



<p>You can give it the full path, with or without ABSPATH. Use it after &#8220;init&#8221;. It only needs to be called once, but duplicates will not be stored.</p>



<p>In a similar fashion, use <strong>wpsc_delete_plugin</strong> to remove a plugin.</p>



<p>The release also makes it much simpler to modify the cookies used by WP Super Cache to identify &#8220;known users&#8221;. This is useful to identify particular types of pages such as translated pages that should only be shown to certain users. For example, visitors who have the English cookie will be shown cached pages in English. The German cookie will fetch German cached pages. The action <strong>wpsc_add_cookie</strong> makes this possible.</p>



<pre class="wp-block-preformatted">do_action( 'wpsc_add_cookie', 'language' );</pre>



<p>Execute that in your plugin and WP Super Cache will watch out for the language cookie. The plugin will use the cookie name <em>and</em> value in determining what cached page to display. So &#8220;language = irish&#8221; will show a different page to &#8220;language = french&#8221;.</p>



<p>Use <strong>wpsc_delete_cookie</strong> to remove a cookie. Cache files won&#8217;t be deleted. It&#8217;s doubtful they&#8217;d be served however because of the hashed key used to name the filenames.<br/></p>



<pre class="wp-block-preformatted">do_action( 'wpsc_delete_cookie', 'language' );</pre>



<p>If you&#8217;re going to use either of the plugin or cookie actions here I recommend using <strong>Simple Caching</strong>. While the plugin will attempt to update mod_rewrite rules, it is much simpler to have PHP serve the files. Apart from that, any plugins loaded by WP Super Cache will be completely skipped if Expert mode is enabled.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://odd.blog/2018/08/17/wp-super-cache-1-6-3/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
<post-id xmlns="com-wordpress:feed-additions:1">89502017</post-id>	</item>
		<item>
		<title>WP Super Cache and Cookie Banners</title>
		<link>https://odd.blog/2018/07/20/wp-super-cache-and-cookie-banners/</link>
					<comments>https://odd.blog/2018/07/20/wp-super-cache-and-cookie-banners/#comments</comments>
		
		<dc:creator><![CDATA[Donncha]]></dc:creator>
		<pubDate>Fri, 20 Jul 2018 13:33:08 +0000</pubDate>
				<category><![CDATA[WordPress]]></category>
		<category><![CDATA[cookie banner]]></category>
		<category><![CDATA[cookies]]></category>
		<category><![CDATA[GDPR]]></category>
		<category><![CDATA[irishblogs]]></category>
		<category><![CDATA[wp-super-cache]]></category>
		<guid isPermaLink="false">https://odd.blog/?p=89501949</guid>

					<description><![CDATA[EDIT: Updated for WP Super Cache 1.6.3 and newer. More sites use cookie banners now that the GDPR is active but some are finding that their banners are misbehaving once they enable caching. This is a similar issue to the one that happened to some page counter plugins in the [&#8230;]]]></description>
										<content:encoded><![CDATA[
<p><strong>EDIT:  Updated for WP Super Cache 1.6.3 and newer.</strong></p>



<p>More sites use cookie banners now that the GDPR is active but some are finding that their banners are misbehaving once they enable caching.</p>



<p>This is a similar issue to the one that happened to some page counter plugins in the past. The page counter wouldn&#8217;t increment.</p>



<p>When a cookie banner is clicked a cookie is set in the browser so the website knows this visitor has agreed to accept cookies. If the cookie is set then the cookie banner html is not sent to the browser.</p>



<p>I suspect the main issue is that the code that sets and checks if the cookie is set is PHP. Unfortunately because the page is cached then no PHP code is executed, and the cookie banner is displayed because it was originally cached that way.<br></p>



<p>Since WP Super Cache only knows about certain WordPress cookies it assumes everyone who doesn&#8217;t have those cookies is a first time &#8220;anonymous&#8221; visitor. It doesn&#8217;t know about your cookie banner cookie.<br></p>



<p>You have two options:</p>



<ol><li>Rewrite your cookie banner so it&#8217;s completely in Javascript. Do the cookie detection in Javascript and also set the cookie in Javascript. If the cookie banner has been clicked then you need to trigger an action, and other Javascript that is hooked on to that trigger will run and load the tracking cookies.</li><li>Modify WP Super Cache so it knows about the cookie your cookie banner uses. Caching won&#8217;t work quite as well as before as it&#8217;ll be split between visitors who have clicked the cookie banner and those that haven&#8217;t. One cached file will display the cookie banner, and the other will not but it will have ad tracking Javascript.<br></li></ol>



<p>Using Javascript completely is a better solution because it runs in the browser on every page load but that might not be possible every time.</p>



<p>Otherwise, use PHP to get WP Super Cache to play nicely with your existing code. You basically need to run <code>do_action( 'wpsc_add_cookie', 'cookie_name' );</code> after <code>init</code> so WP Super Cache adds the cookie name to it&#8217;s cookie list. This only needs to be done once but you can leave it run all the time because it will only ever add the cookie name once. This also ensures the name is added again if the WP Super Cache configuration file is ever reset or deleted.</p>



<ol><li>Create a PHP script in wp-content/mu-plugins/ (or in to your own plugin). </li><li>Add the cookie by using the <code>wpsc_add_cookie</code> action in a function that loads on &#8220;init&#8221;.</li><li>Reload any uncached page and the cookie name will be added to the cookie list.</li><li>Caching can only be performed by <em>simple</em> caching now, unless you&#8217;re willing to edit mod_rewrite rules in your .htaccess file.</li></ol>



<pre class="wp-block-code"><code>/*
 * Tell WP Super Cache to cache requests with the cookie "eucookie" separately
 * from other visitors.
 */
function add_wpsc_cookie_banner() {
    do_action( 'wpsc_add_cookie', 'eucookie' );
}
add_action( 'init', 'add_wpsc_cookie_banner' );</code></pre>



<p>Substitute the name of the cookie (eucookie) for your cookie name. </p>



<p>When your plugin is uninstalled it should remove your cookie with the following:</p>



<pre class="wp-block-code"><code>do_action( 'wpsc_delete_cookie', 'eucookie' );</code></pre>



<p>For future reference, since cookie banners will hopefully not be around forever, here&#8217;s what they looked like in the deep, distant past of 2018. <img src="https://s.w.org/images/core/emoji/14.0.0/72x72/1f642.png" alt="🙂" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>



<div class="wp-block-image"><figure class="aligncenter"><img data-attachment-id="89501952" data-permalink="https://odd.blog/2018/07/20/wp-super-cache-and-cookie-banners/screen-shot-2018-07-20-at-14-13-22/" data-orig-file="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.22.png?fit=603%2C213&amp;ssl=1" data-orig-size="603,213" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Screen-Shot-2018-07-20-at-14.13.22" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.22.png?fit=300%2C106&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.22.png?fit=603%2C213&amp;ssl=1" decoding="async" loading="lazy" width="603" height="213" src="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.22.png?resize=603%2C213&#038;ssl=1" alt="" class="wp-image-89501952" srcset="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.22.png?w=603&amp;ssl=1 603w, https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.22.png?resize=300%2C106&amp;ssl=1 300w" sizes="(max-width: 603px) 100vw, 603px" data-recalc-dims="1" /></figure></div>



<div class="wp-block-image"><figure class="aligncenter"><img data-attachment-id="89501951" data-permalink="https://odd.blog/2018/07/20/wp-super-cache-and-cookie-banners/screen-shot-2018-07-20-at-14-12-14/" data-orig-file="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.12.14.png?fit=926%2C307&amp;ssl=1" data-orig-size="926,307" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Screen-Shot-2018-07-20-at-14.12.14" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.12.14.png?fit=300%2C99&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.12.14.png?fit=790%2C262&amp;ssl=1" decoding="async" loading="lazy" width="790" height="262" src="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.12.14.png?resize=790%2C262&#038;ssl=1" alt="" class="wp-image-89501951" srcset="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.12.14.png?w=926&amp;ssl=1 926w, https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.12.14.png?resize=300%2C99&amp;ssl=1 300w, https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.12.14.png?resize=768%2C255&amp;ssl=1 768w, https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.12.14.png?resize=900%2C298&amp;ssl=1 900w" sizes="(max-width: 790px) 100vw, 790px" data-recalc-dims="1" /><figcaption>The LA Times just gave up and don&#8217;t show anything to EU visitors.</figcaption></figure></div>



<div class="wp-block-image"><figure class="aligncenter"><img data-attachment-id="89501953" data-permalink="https://odd.blog/2018/07/20/wp-super-cache-and-cookie-banners/screen-shot-2018-07-20-at-14-13-42/" data-orig-file="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.42.png?fit=440%2C84&amp;ssl=1" data-orig-size="440,84" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Screen-Shot-2018-07-20-at-14.13.42" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.42.png?fit=300%2C57&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.42.png?fit=440%2C84&amp;ssl=1" decoding="async" loading="lazy" width="440" height="84" src="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.42.png?resize=440%2C84&#038;ssl=1" alt="" class="wp-image-89501953" srcset="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.42.png?w=440&amp;ssl=1 440w, https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.42.png?resize=300%2C57&amp;ssl=1 300w" sizes="(max-width: 440px) 100vw, 440px" data-recalc-dims="1" /></figure></div>



<div class="wp-block-image"><figure class="aligncenter"><img data-attachment-id="89501954" data-permalink="https://odd.blog/2018/07/20/wp-super-cache-and-cookie-banners/screen-shot-2018-07-20-at-14-13-54/" data-orig-file="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.54.png?fit=753%2C298&amp;ssl=1" data-orig-size="753,298" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Screen-Shot-2018-07-20-at-14.13.54" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.54.png?fit=300%2C119&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.54.png?fit=753%2C298&amp;ssl=1" decoding="async" loading="lazy" width="753" height="298" src="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.54.png?resize=753%2C298&#038;ssl=1" alt="" class="wp-image-89501954" srcset="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.54.png?w=753&amp;ssl=1 753w, https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.13.54.png?resize=300%2C119&amp;ssl=1 300w" sizes="(max-width: 753px) 100vw, 753px" data-recalc-dims="1" /></figure></div>



<div class="wp-block-image"><figure class="aligncenter"><img data-attachment-id="89501955" data-permalink="https://odd.blog/2018/07/20/wp-super-cache-and-cookie-banners/screen-shot-2018-07-20-at-14-14-08/" data-orig-file="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.14.08.png?fit=992%2C126&amp;ssl=1" data-orig-size="992,126" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Screen-Shot-2018-07-20-at-14.14.08" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.14.08.png?fit=300%2C38&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.14.08.png?fit=790%2C100&amp;ssl=1" decoding="async" loading="lazy" width="790" height="100" src="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.14.08.png?resize=790%2C100&#038;ssl=1" alt="" class="wp-image-89501955" srcset="https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.14.08.png?w=992&amp;ssl=1 992w, https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.14.08.png?resize=300%2C38&amp;ssl=1 300w, https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.14.08.png?resize=768%2C98&amp;ssl=1 768w, https://i0.wp.com/odd.blog/files/2018/07/Screen-Shot-2018-07-20-at-14.14.08.png?resize=900%2C114&amp;ssl=1 900w" sizes="(max-width: 790px) 100vw, 790px" data-recalc-dims="1" /></figure></div>
]]></content:encoded>
					
					<wfw:commentRss>https://odd.blog/2018/07/20/wp-super-cache-and-cookie-banners/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
<post-id xmlns="com-wordpress:feed-additions:1">89501949</post-id>	</item>
		<item>
		<title>Writing WP Super Cache Plugins</title>
		<link>https://odd.blog/2017/10/25/writing-wp-super-cache-plugins/</link>
					<comments>https://odd.blog/2017/10/25/writing-wp-super-cache-plugins/#comments</comments>
		
		<dc:creator><![CDATA[Donncha]]></dc:creator>
		<pubDate>Wed, 25 Oct 2017 16:21:28 +0000</pubDate>
				<category><![CDATA[General]]></category>
		<category><![CDATA[WordPress]]></category>
		<category><![CDATA[wp-super-cache]]></category>
		<guid isPermaLink="false">https://odd.blog/?p=89500474</guid>

					<description><![CDATA[WP Super Cache is a full page caching plugin for WordPress. When a page is cached almost all of WordPress is skipped and the page is sent to the browser with the minimum amount of code executed. This makes the page load much faster. Unfortunately if you want to run [&#8230;]]]></description>
										<content:encoded><![CDATA[<p>WP Super Cache is a full page caching plugin for WordPress. When a page is cached almost all of WordPress is skipped and the page is sent to the browser with the minimum amount of code executed. This makes the page load much faster.</p>
<p>Unfortunately if you want to run code on every page load you&#8217;re out of luck as regular WordPress plugins are not loaded or executed. You&#8217;ll need to write a WP Super Cache plugin. This short introduction will not teach you how to write plugins but the example plugins that ship with WP Super Cache will get you a long way towards understanding how they work.</p>
<p><img data-attachment-id="89500519" data-permalink="https://odd.blog/screen-shot-2017-10-25-at-16-49-10/" data-orig-file="https://i0.wp.com/odd.blog/files/2017/10/Screen-Shot-2017-10-25-at-16.49.10.png?fit=608%2C267&amp;ssl=1" data-orig-size="608,267" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Screen Shot 2017-10-25 at 16.49.10" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2017/10/Screen-Shot-2017-10-25-at-16.49.10.png?fit=300%2C132&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2017/10/Screen-Shot-2017-10-25-at-16.49.10.png?fit=608%2C267&amp;ssl=1" decoding="async" loading="lazy" class="alignnone size-full wp-image-89500519" src="https://i0.wp.com/odd.blog/files/2017/10/Screen-Shot-2017-10-25-at-16.49.10.png?resize=608%2C267&#038;ssl=1" alt="Screen Shot 2017-10-25 at 16.49.10" width="608" height="267" srcset="https://i0.wp.com/odd.blog/files/2017/10/Screen-Shot-2017-10-25-at-16.49.10.png?w=608&amp;ssl=1 608w, https://i0.wp.com/odd.blog/files/2017/10/Screen-Shot-2017-10-25-at-16.49.10.png?resize=300%2C132&amp;ssl=1 300w" sizes="(max-width: 608px) 100vw, 608px" data-recalc-dims="1" /></p>
<p>WP Super Cache ships with some example plugins in wp-super-cache/plugins/. Some of them even do useful tasks like help with domain mapping and Jetpack integration. There&#8217;s one called &#8220;awaitingmoderation.php&#8221; which removes the text &#8220;Your comment is awaiting moderation.&#8221; when someone writes a moderated comment.<br />There&#8217;s also dynamic-cache-test.php which is a complicated beast but it&#8217;s heavily commented. It allows you to add template tags to your site that are replaced when the cached page is loaded.</p>
<p>Since WP Super Cache 1.6.3 <a href="https://github.com/Automattic/wp-super-cache/commit/b9e1dfd519156ac1fc9e55e134fe8f1871c51b75">you can use</a> the &#8220;wpsc_add_plugin&#8221; action to activate a plugin. You must pass the full path and filename of the plugin to the action like this:</p>
<pre>do_action( 'wpsc_add_plugin', ABSPATH . 'wp-content/plugins/myplugin/wpsc-helper.php' );</pre>
<p>In a similar fashion you can use the &#8220;wpsc_delete_plugin&#8221; action to deactivate a plugin. You only need to add a plugin once but if run multiple times it will only be added once.</p>
<p>WP Super Cache plugins can be put anywhere that the web server can load them. If you&#8217;re writing a plugin or theme you can activate the plugin in your distribution directory.</p>
<h3>Actions</h3>
<p>These plugins run before most of WordPress has loaded. That means you can&#8217;t rely on some of the nice features of WordPress such as filters and actions. However, WP Super Cache has it&#8217;s own action/filter system that is similar to actions and filters in WordPress:</p>
<ul>
<li>add_cacheaction( $action, $func )</li>
<li>do_cacheaction( $action, $value = &#8221; )</li>
</ul>
<p>A cacheaction is also a filter. If you hook on to a cache action that has a parameter, you must return that parameter at the end of the function like you would with a WordPress filter.</p>
<p><img data-attachment-id="89500522" data-permalink="https://odd.blog/screen-shot-2017-10-25-at-16-52-59/" data-orig-file="https://i0.wp.com/odd.blog/files/2017/10/Screen-Shot-2017-10-25-at-16.52.59.png?fit=591%2C259&amp;ssl=1" data-orig-size="591,259" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Screen Shot 2017-10-25 at 16.52.59" data-image-description="" data-image-caption="" data-medium-file="https://i0.wp.com/odd.blog/files/2017/10/Screen-Shot-2017-10-25-at-16.52.59.png?fit=300%2C131&amp;ssl=1" data-large-file="https://i0.wp.com/odd.blog/files/2017/10/Screen-Shot-2017-10-25-at-16.52.59.png?fit=591%2C259&amp;ssl=1" decoding="async" loading="lazy" class="alignnone size-full wp-image-89500522" src="https://i0.wp.com/odd.blog/files/2017/10/Screen-Shot-2017-10-25-at-16.52.59.png?resize=591%2C259&#038;ssl=1" alt="Screen Shot 2017-10-25 at 16.52.59" width="591" height="259" srcset="https://i0.wp.com/odd.blog/files/2017/10/Screen-Shot-2017-10-25-at-16.52.59.png?w=591&amp;ssl=1 591w, https://i0.wp.com/odd.blog/files/2017/10/Screen-Shot-2017-10-25-at-16.52.59.png?resize=300%2C131&amp;ssl=1 300w" sizes="(max-width: 591px) 100vw, 591px" data-recalc-dims="1" /></p>
<p>If you need to hook into a WordPress filter use the imaginatively named cache action &#8220;add_cacheaction&#8221;. That runs on &#8220;init&#8221; so the function that is executed can use <code>add_action()</code> or <code>add_filter()</code>. You can see this in action in the plugins/dynamic-cache-test.php or plugins/awaitingmoderation.php scripts.</p>
<p>Two very useful filters are the WordPress filter, &#8220;wpsupercache_buffer&#8221; (in wp-cache-phase2.php) that is used to modify the page before it is <em>cached</em> and the cache action &#8220;wpsc_cachedata&#8221; (in wp-cache-phase1.php) is used to modify the cached page just before it&#8217;s <em>served</em>.</p>


<h3 class="wp-block-heading">Cookies</h3>



<p>WP Super Cache 1.6.3 <a href="https://github.com/Automattic/wp-super-cache/commit/b9e1dfd519156ac1fc9e55e134fe8f1871c51b75">added</a> the wpsc_add_cookie action. This allows you to change the key used to identify a cache file.</p>



<p>Cookies are one part of the key that tells WP Super Cache what cache file to serve to a visitor. By adding a cookie to the internal cookie list the plugin will know that visitors will a certain cookie should be served a different cache file.</p>



<p>For example, a translation plugin may use the cookie &#8220;language&#8221; to identify visitors who opted to view a translated website. If that cookie has the value &#8220;ie&#8221; it will show an Irish translation, &#8220;fr&#8221; will serve a French translation and so on. If WP Super Cache knows about the &#8220;language&#8221; cookie it can cache each translated page correctly and then serve it to the appropriate visitor.</p>



<p>The plugin will use the name of the cookie <em>and </em>the value of the cookie to determine the cache file to be used.</p>



<p>Example:</p>



<pre class="wp-block-preformatted">do_action( 'wpsc_add_cookie', 'language' );</pre>



<p>You can remove a cookie by using the &#8220;wpsc_delete_cookie&#8221; action with the same parameter.</p>



<p>Please note that cache files are not refreshed when cookies are added or deleted. You can use the function &#8220;wp_cache_clear_cache()&#8221; to clear the cache for a given blog. If on a multisite install pass the blog_id of the blog otherwise the contents of the cache directory will be deleted.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://odd.blog/2017/10/25/writing-wp-super-cache-plugins/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
		<friends:post-format>standard</friends:post-format>
<post-id xmlns="com-wordpress:feed-additions:1">89500474</post-id>	</item>
	</channel>
</rss>
